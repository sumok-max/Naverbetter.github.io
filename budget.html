import React, { useState } from â€˜reactâ€™;
import { Copy, Check } from â€˜lucide-reactâ€™;

const VietnamBudgetSheet = () => {
const [expenses, setExpenses] = useState({
electricity: 1200000,
water: 250000,
internet: 400000,
food: 15000000,
transport: 4000000,
health: 2500000,
clothing: 3000000,
entertainment: 3000000,
household: 2000000,
mobile: 600000,
gifts: 1500000,
misc: 2500000
});

const [copied, setCopied] = useState(false);

const fixedExpenses = {
rent: 13500000,
management: 400000
};

const income = {
sumeo: 55000000,
lanheo: 25000000
};

const totalIncome = income.sumeo + income.lanheo;
const totalExpenses = Object.values(fixedExpenses).reduce((a, b) => a + b, 0) +
Object.values(expenses).reduce((a, b) => a + b, 0);
const savings = totalIncome - totalExpenses;
const savingsRate = ((savings / totalIncome) * 100).toFixed(1);

const handleChange = (key, value) => {
const numValue = value.replace(/,/g, â€˜â€™);
setExpenses(prev => ({
â€¦prev,
[key]: parseFloat(numValue) || 0
}));
};

const formatInputNumber = (num) => {
return num.toLocaleString(â€˜en-USâ€™);
};

const formatNumber = (num) => {
return num.toLocaleString(â€˜en-USâ€™);
};

const generateSheetData = () => {
return `VIETNAM MONTHLY BUDGET - Sumeo & Lanheo Family

MONTHLY INCOME	Amount (VND)
Sumeoâ€™s Salary	${income.sumeo}
Lanheoâ€™s Salary	${income.lanheo}
Total Income	${totalIncome}

MONTHLY EXPENSES	Amount (VND)
Rent	${fixedExpenses.rent}
Management Fee	${fixedExpenses.management}
Electricity	${expenses.electricity}
Water	${expenses.water}
Internet & Phone	${expenses.internet}
Food & Groceries (incl. dining out)	${expenses.food}
Transportation (Grab/Taxi/Fuel)	${expenses.transport}
Healthcare & Insurance	${expenses.health}
Clothing & Personal Care	${expenses.clothing}
Entertainment & Hobbies	${expenses.entertainment}
Household Items	${expenses.household}
Mobile Phone Bills	${expenses.mobile}
Gifts & Special Occasions	${expenses.gifts}
Miscellaneous & Emergency Fund	${expenses.misc}
Total Expenses	${totalExpenses}

SUMMARY	Amount (VND)
Total Income	${totalIncome}
Total Expenses	${totalExpenses}
Monthly Savings	${savings}
Savings Rate	${savingsRate}%

Notes:

- Adjust amounts based on actual expenses
- Recommended savings rate: 30-40%
- Review monthly and update as needed`;
  };
  
  const copyToClipboard = async () => {
  try {
  await navigator.clipboard.writeText(generateSheetData());
  setCopied(true);
  setTimeout(() => setCopied(false), 2000);
  } catch (err) {
  alert(â€˜Copy failed. Please manually select and copy the text below.â€™);
  }
  };
  
  return (
  
    <div className="min-h-screen bg-gradient-to-br from-purple-600 to-indigo-700 p-4 md:p-8">
      <div className="max-w-5xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
        {/* Header */}
        <div className="bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-8 text-center">
          <h1 className="text-3xl md:text-4xl font-bold mb-2">ğŸ  Monthly Budget Planner</h1>
          <p className="text-purple-100">Sumeo & Lanheo Family - Vietnam</p>
        </div>
  
  ```
    <div className="p-6 md:p-8">
      {/* Copy Button */}
      <div className="mb-6 flex flex-col gap-4">
        <button
          onClick={copyToClipboard}
          className="flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors shadow-lg"
        >
          {copied ? <Check size={20} /> : <Copy size={20} />}
          {copied ? 'Copied!' : 'Copy Data for Google Sheets'}
        </button>
        
        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
          <p className="text-sm text-blue-800">
            <strong>How to use:</strong><br/>
            1. Click "Copy Data for Google Sheets" button above<br/>
            2. Go to Google Sheets and create a new spreadsheet<br/>
            3. Click on cell A1 and paste (Ctrl+V or Cmd+V)<br/>
            4. Share with Lanheo!<br/><br/>
            <strong>ğŸ’¡ Default amounts are based on Hanoi living costs (2025)</strong>
          </p>
        </div>
      </div>
  
      {/* Income Section */}
      <div className="bg-green-50 border-l-4 border-green-500 rounded-lg p-6 mb-6">
        <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
          ğŸ’° Monthly Income
        </h2>
        <div className="space-y-3">
          <div className="flex justify-between items-center">
            <span className="font-medium text-gray-700">Sumeo's Salary</span>
            <span className="text-lg font-bold text-green-600">{formatNumber(income.sumeo)} VND</span>
          </div>
          <div className="flex justify-between items-center">
            <span className="font-medium text-gray-700">Lanheo's Salary</span>
            <span className="text-lg font-bold text-green-600">{formatNumber(income.lanheo)} VND</span>
          </div>
          <div className="border-t-2 border-green-300 pt-3 flex justify-between items-center">
            <span className="font-bold text-gray-800">Total Income</span>
            <span className="text-xl font-bold text-green-700">{formatNumber(totalIncome)} VND</span>
          </div>
        </div>
      </div>
  
      {/* Expenses Section */}
      <div className="mb-6">
        <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
          ğŸ“Š Monthly Expenses
        </h2>
        <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">
          <table className="w-full">
            <thead className="bg-gray-100">
              <tr>
                <th className="text-left p-4 font-semibold text-gray-700">Category</th>
                <th className="text-right p-4 font-semibold text-gray-700">Amount (VND)</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-200">
              <tr>
                <td className="p-4 font-medium text-gray-700">ğŸ˜ï¸ Rent</td>
                <td className="p-4 text-right font-semibold text-indigo-600">{formatNumber(fixedExpenses.rent)}</td>
              </tr>
              <tr>
                <td className="p-4 font-medium text-gray-700">ğŸ”§ Management Fee</td>
                <td className="p-4 text-right font-semibold text-indigo-600">{formatNumber(fixedExpenses.management)}</td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ’¡ Electricity</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.electricity)}
                    onChange={(e) => handleChange('electricity', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ’§ Water</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.water)}
                    onChange={(e) => handleChange('water', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ“¶ Internet & Phone</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.internet)}
                    onChange={(e) => handleChange('internet', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸš Food & Groceries</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.food)}
                    onChange={(e) => handleChange('food', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸš— Transportation</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.transport)}
                    onChange={(e) => handleChange('transport', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ¥ Healthcare & Insurance</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.health)}
                    onChange={(e) => handleChange('health', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ‘• Clothing & Personal Care</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.clothing)}
                    onChange={(e) => handleChange('clothing', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ¬ Entertainment & Hobbies</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.entertainment)}
                    onChange={(e) => handleChange('entertainment', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ›’ Household Items</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.household)}
                    onChange={(e) => handleChange('household', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ“± Mobile Phone Bills</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.mobile)}
                    onChange={(e) => handleChange('mobile', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ Gifts & Special Occasions</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.gifts)}
                    onChange={(e) => handleChange('gifts', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-yellow-50">
                <td className="p-4 font-medium text-gray-700">ğŸ’³ Miscellaneous & Emergency</td>
                <td className="p-4 text-right">
                  <input
                    type="text"
                    value={formatInputNumber(expenses.misc)}
                    onChange={(e) => handleChange('misc', e.target.value)}
                    className="w-32 px-3 py-2 border border-gray-300 rounded text-right focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  />
                </td>
              </tr>
              <tr className="bg-gray-50 border-t-2 border-indigo-400">
                <td className="p-4 font-bold text-gray-800">Total Expenses</td>
                <td className="p-4 text-right text-xl font-bold text-red-600">{formatNumber(totalExpenses)} VND</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
  
      {/* Savings Section */}
      <div className="bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-8 text-white text-center shadow-lg">
        <h2 className="text-2xl font-bold mb-4">ğŸ’ Monthly Savings</h2>
        <div className="text-5xl font-bold mb-2">{formatNumber(savings)} VND</div>
        <div className="text-lg opacity-90">{savingsRate}% of Total Income</div>
      </div>
  
      {/* Notes */}
      <div className="mt-6 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg p-6">
        <p className="font-bold text-yellow-800 mb-2">ğŸ“ Notes:</p>
        <ul className="text-sm text-yellow-800 space-y-1">
          <li>â€¢ Yellow rows are editable - adjust amounts as needed</li>
          <li>â€¢ All amounts show comma separators for easy reading</li>
          <li>â€¢ Default amounts are based on 2025 Hanoi expat living costs</li>
          <li>â€¢ Food budget includes groceries + dining out (avg 2-3 restaurant meals/week)</li>
          <li>â€¢ Transportation includes Grab/taxi usage + occasional car rental</li>
          <li>â€¢ Recommended savings rate: 30-40%. Your current rate is excellent!</li>
        </ul>
      </div>
    </div>
  </div>
  ```
  
    </div>
  );

};

export default VietnamBudgetSheet;